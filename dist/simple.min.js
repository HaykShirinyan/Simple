var Simple;(function(e){function t(t){return function(n){e.Configuration.container.register(t.name,n,t.dependencies,t.singleton)}}function n(t){return function(n){if(!(n.prototype instanceof e.View))throw new TypeError("View decorator can only be used for objects inheriting from View.");e.Configuration.container.register(t.name,n,t.dependencies),e.Configuration.$views[t.name]=t.selector||t.name}}e.injectable=t,e.view=n})(Simple||(Simple={}));var Simple;(function(e){var t=function(){function t(){}return Object.defineProperty(t,"container",{get:function(){return t._container||(t._container=new e.ServiceContainer,t._container.addInstance("$serviceContainer",t._container)),t._container},set:function(e){if(t._container)for(var n=0,i=t._container.services;n<i.length;n++){var r=i[n];e.register(r.name,r.service,r.depencencies,r.singleton)}t._container=e},enumerable:!0,configurable:!0}),t.resolve=function(e){return t.container.get(e)},t}();e.Configuration=t})(Simple||(Simple={}));var Simple;(function(e){var t=function(){function e(){this.services=[],this._singletons=[]}return e.prototype.register=function(e,t,n,i){void 0===i&&(i=!1);for(var r=0;r<this.services.length;r++){var o=this.services[r];if(o.name===e)return o.service=t,o.depencencies=n||[],o.singleton=i,this.services[r]=o,t}return this.services.push({name:e,service:t,depencencies:n||[],singleton:i}),t},e.prototype.addInstance=function(e,t){return this.register(e,t,[],!0),this._singletons.push({name:e,instance:t}),t},e.prototype.getSingletonInstance=function(e){for(var t=0,n=this._singletons;t<n.length;t++){var i=n[t];if(i.name===e)return i.instance}},e.prototype.getSingleton=function(e){var t=this.getSingletonInstance(e.name);if(t)return t;var n=this.createInstance(e);return this._singletons.push({name:e.name,instance:n}),n},e.prototype.getDependencies=function(e){for(var t=[],n=0,i=e.depencencies;n<i.length;n++){var r=i[n];t.push(this.get(r))}return t},e.prototype.createInstance=function(e){var t=this.getDependencies(e),n=Object.create(e.service.prototype);return n.constructor.apply(n,t),n},e.prototype.getInstance=function(e){return e.singleton?this.getSingleton(e):this.createInstance(e)},e.prototype.get=function(e){for(var t=0,n=this.services;t<n.length;t++){var i=n[t];if(i.name===e)return this.getInstance(i)}throw new Error("Service was not found. name: "+e)},e}();e.ServiceContainer=t})(Simple||(Simple={}));var __decorate=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Simple;(function(e){var t=function(){function t(t){this.htmlService=t,this.modelWatcher=new e.Watcher(this,"model"),this.viewDataWatcher=new e.Watcher(this,"viewData")}return t.prototype.setPath=function(e,t,n){for(var i=t.split("."),r=0;r<i.length-1;r++)e=e[r]||{};e[i[i.length-1]]=n},t.prototype.initializeContext=function(e,t){this.model=t},t=__decorate([e.view({name:"simple-view"})],t)}();e.View=t})(Simple||(Simple={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Simple;(function(e){var t=function(e){function t(t,n){var i=e.call(this)||this;i._mutators=["push","pop","shift","unshift","splice","sort","reverse"],i._events={},i.extend(),i.filter;for(var r=0;r<t.length;r++){var o=t[r];e.prototype.push.call(i,o),i._copy.push(o),n(r,o)}return i}return __extends(t,e),t.prototype.extend=function(){for(var e in this){var t=this[e];"function"==typeof t&&this.extendFunction(e,t)}},t.prototype.extendFunction=function(e,t){var n=this;this[e]=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=t.apply(n,i);return n.call(e,n._copy,n),n._mutators.indexOf(e)>-1&&n._copy[e].apply(n._copy,i),o}},t.prototype.call=function(e,t,n){var i=this._events[e];if(i)for(var r=0,o=i;r<o.length;r++){var s=o[r];s&&s(t,n)}},t.prototype.addEventListener=function(e,t){Array.isArray(this._events[e])||(this._events[e]=[]),this._events[e].push(t)},t.prototype.addEventListeners=function(e,t){for(var n=0,i=e;n<i.length;n++){var r=i[n];this.addEventListener(r,t)}},t}(Array);e.ObservableArray=t})(Simple||(Simple={}));var Simple;(function(e){var t=function(){function t(e,t){this.parent=e,this.objectGraph={},this.valueChangedEvents={},this.bind(e,t,t)}return t.prototype.watch=function(e,t){Array.isArray(this.valueChangedEvents[e])||(this.valueChangedEvents[e]=[]),this.valueChangedEvents[e].push(t)},t.prototype.valueChanged=function(e,t,n){var i=this.valueChangedEvents[e];if(i)for(var r=0,o=i;r<o.length;r++){var s=o[r];s&&s(t,n)}},t.prototype.canUpdate=function(e,t,n){return!!e||t!==n},t.prototype.isObject=function(e){return!(!e||"function"==typeof e||"string"==typeof e||!Object.keys(e)||Array.isArray(e))},t.prototype.setObject=function(e,t,n,i){for(var r in t){var o=i+"."+r;this.bind(e[n],r,o),this.set(e[n],t[r],r,o,!0)}},t.prototype.resetObject=function(e){var t=".";for(var n in this.objectGraph)if(0===n.indexOf(t)&&n.length>e.length){var i=this.objectGraph[n],r=void 0;delete this.objectGraph[n],this.valueChanged(e,i,r)}},t.prototype.watchArrayFunctions=function(e,t){var n=this;return t.addEventListeners(["push","pop","shift","unshift","splice","sort","reverse"],function(t,i){n.valueChanged(e,t,i)}),t},t.prototype.setArray=function(t,n,i,r){var o=this;return this.watchArrayFunctions(r,new e.ObservableArray(n,function(e,n){var s=r+"["+e+"]";o.bind(t[i],e,s),o.set(t[i],n,e,s,!0);for(var a in n){var c=r+"["+e+"]."+a;o.bind(t[i][e],a,c),o.set(t[i][e][a],n[a],a,c,!0)}}))},t.prototype.set=function(e,t,n,i,r){void 0===r&&(r=!1);var o=this.objectGraph[i],s=this.isObject(o);this.canUpdate(r,o,t)&&(this.objectGraph[i]=t,this.valueChanged(i,o,t),this.isObject(t)?this.setObject(e,t,n,i):s?this.resetObject(i):Array.isArray(t)&&(this.objectGraph[i]=this.setArray(e,t,n,i)))},t.prototype.bind=function(e,t,n){var i=this;n in this.objectGraph||(this.objectGraph[n]=e[t]),Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return i.objectGraph[n]},set:function(r){i.set(e,r,t,n)}})},t}();e.Watcher=t})(Simple||(Simple={}));var Simple;(function(e){var t;(function(t){var n;(function(t){(function(){function t(e,t){this._htmlService=e,this._serviceContainer=t}return t.prototype.renderView=function(t){for(var n in e.Configuration.$views){var i=this._htmlService.select(e.Configuration.$views[n]);if(i){var r=this._serviceContainer.get(n);r.initializeContext(i,t)}}},t=__decorate([e.injectable({name:"$viewEngine",singleton:!0,dependencies:["$htmlService","$serviceContainer"]})],t)})()})(n=t.Concrete||(t.Concrete={}))})(t=e.Rendering||(e.Rendering={}))})(Simple||(Simple={}));var Simple;(function(e){var t;(function(t){var n;(function(t){var n=function(t){function n(e){return t.call(this,e)||this}return __extends(n,t),n.prototype.initializeContext=function(e,n){t.prototype.initializeContext.call(this,e,n);var i=e.getAttribute(this.name);this.model[i]?this.modelWatcher.watch(i,function(t,n){e.textContent=n}):this.viewData[i]?this.viewDataWatcher.watch(i,function(t,n){e.textContent=n}):0===i.indexOf("model.")?this.setPath(this.model,i,e.textContent):0===i.indexOf("viewData.")&&this.setPath(this.model,i,e.textContent)},n=__decorate([e.view({name:"simple-bind",selector:"[simple-bind]:not([simple-repeat] [simple-bind])"})],n)}(e.View);t.SimpleBind=n})(n=t.Views||(t.Views={}))})(t=e.Rendering||(e.Rendering={}))})(Simple||(Simple={}));var Simple;(function(e){var t;(function(t){var n;(function(t){(function(){function t(){this._document=document,this._window=window}return t.prototype.ready=function(e){(this._document.attachEvent?"complete"===this._document.readyState:"loading"!==this._document.readyState)?e():this._document.addEventListener("DOMContentLoaded",e)},t.prototype.addEventListener=function(e,t){this._window.addEventListener(e,t)},t.prototype.select=function(e,t){return t?t.querySelector(e):this._document.querySelector(e)},t.prototype.selectAll=function(e,t){return t?t.querySelectorAll(e):this._document.querySelectorAll(e)},t=__decorate([e.injectable({name:"$htmlService"})],t)})()})(n=t.Concrete||(t.Concrete={}))})(t=e.Services||(e.Services={}))})(Simple||(Simple={}));var Simple;(function(e){var t;(function(t){var n;(function(t){(function(){function t(){}return t.prototype.parseResponse=function(e){return e?JSON.parse(e):e},t.prototype.success=function(e){return{statusCode:e.status,data:this.parseResponse(e.responseText)}},t.prototype.fail=function(e){return{statusCode:e.status,data:this.parseResponse(e.responseText)}},t.prototype.get=function(e){var t=this;return new Promise(function(e,n){var i=new XMLHttpRequest;i.open("GET","/my/url",!0),i.onload=function(){i.status>=200&&i.status<400?e(t.success(i)):n(t.fail(i))},i.onerror=function(){n(t.fail(i))},i.send()})},t=__decorate([e.injectable({name:"$httpService"})],t)})()})(n=t.Concrete||(t.Concrete={}))})(t=e.Services||(e.Services={}))})(Simple||(Simple={}));